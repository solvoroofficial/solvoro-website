<!-- layout.html — Shared header + footer for Solvoro

USAGE (copy this loader into any page, then call addSolvoroLayout()):

<script>
async function addSolvoroLayout(headerId = 'layout-header', footerId = 'layout-footer'){
  const res = await fetch('layout.html');
  const text = await res.text();
  const parser = new DOMParser();
  const doc = parser.parseFromString(text, 'text/html');

  // Import template content (header & footer)
  const tmpl = doc.getElementById('solvoro-layout');
  if(!tmpl) throw new Error('layout.html missing template#solvoro-layout');

  const headerNode = tmpl.content.querySelector('header');
  const footerNode = tmpl.content.querySelector('footer');

  if(document.getElementById(headerId)){
    document.getElementById(headerId).appendChild(document.importNode(headerNode, true));
  }
  if(document.getElementById(footerId)){
    document.getElementById(footerId).appendChild(document.importNode(footerNode, true));
  }

  // Inject styles
  const style = doc.querySelector('style#solvoro-layout-style');
  if(style) document.head.appendChild(document.importNode(style, true));

  // Inject and run script
  const script = doc.getElementById('solvoro-layout-script');
  if(script){
    const s = document.createElement('script');
    s.textContent = script.textContent;
    document.body.appendChild(s);
    // initialize after script loads
    if(window.initSolvoroLayout) window.initSolvoroLayout();
  }
}
</script>

-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Solvoro Layout (header + footer)</title>
  </head>
  <body style="display:none"> <!-- hidden because this file is intended to be fetched as a fragment -->

    <!-- Template containing header + footer -->
    <template id="solvoro-layout">

      <!-- HEADER -->
      <header>
        <div class="nav container">
          <div class="brand">
            <div class="logo" aria-hidden="true">
              <img id="sv-logo-img" src="favicon.png" alt="Solvoro logo">
            </div>
            <div class="brand-text">Solvoro</div>
          </div>

          <nav class="main-nav" aria-label="Main navigation">
            <button id="sv-menu-btn" class="sv-menu-btn" aria-expanded="false" aria-controls="sv-nav-list">☰</button>
            <ul id="sv-nav-list">
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="services.html">Services</a></li>
              <li><a href="partners.html">Partners</a></li>
              <li><a href="contact-us.html">Contact</a></li>
              <li><a href="#" id="sv-login-link">Login</a></li>
            </ul>
          </nav>
        </div>
      </header>

      <!-- FOOTER -->
      <footer>
        <div class="container sv-footer">
          <div class="sv-footer-left">
            <div class="logo small" aria-hidden="true"><img src="favicon.png" alt="Solvoro logo"></div>
            <div class="sv-copy">© 2025 Solvoro. All rights reserved.</div>
          </div>
          <div class="sv-footer-right">
            <div class="sv-socials">
              <a href="https://instagram.com/solvoro.freelancing" target="_blank" rel="noopener">Instagram</a>
              <a href="mailto:solvoro.official@gmail.com">Email</a>
            </div>
          </div>
        </div>
      </footer>

    </template>

    <!-- Styles (will be injected into the page's head by the loader) -->
    <style id="solvoro-layout-style">
      :root{
        --bg-main:#071024;
        --bg-card:#0b1220;
        --text-light:#e6eef6;
        --text-muted:#94a3b8;
        --accent-start:#7c3aed;
        --accent-end:#06b6d4;
        --border-light:rgba(255,255,255,0.05);
        --radius:12px;
        --container-width:1100px;
      }
      *{box-sizing:border-box;margin:0;padding:0}
      .container{max-width:var(--container-width);margin:0 auto;padding:12px 20px}

      header{
        position:sticky;top:0;z-index:60;background:rgba(7,16,36,0.95);border-bottom:1px solid var(--border-light);backdrop-filter: blur(6px);
      }
      .nav{display:flex;align-items:center;justify-content:space-between;gap:20px}
      .brand{display:flex;align-items:center;gap:12px}
      .logo{width:48px;height:48px;border-radius:50%;overflow:hidden;display:grid;place-items:center}
      .logo img{width:100%;height:100%;object-fit:cover;display:block}
      .brand-text{font-weight:700;font-size:18px;color:var(--text-light)}

      nav.main-nav{display:flex;align-items:center;gap:12px}
      #sv-nav-list{display:flex;gap:16px;list-style:none;align-items:center}
      #sv-nav-list li a{font-weight:600;color:var(--text-light);text-decoration:none;padding:6px 8px;border-radius:8px}
      #sv-nav-list li a:hover{color:var(--accent-end)}

      /* mobile menu button */
      .sv-menu-btn{display:none;background:transparent;border:none;color:var(--text-light);font-size:20px;cursor:pointer}

      footer{border-top:1px solid var(--border-light);background:var(--bg-main);padding:18px 0}
      .sv-footer{display:flex;align-items:center;justify-content:space-between;gap:12px}
      .sv-footer .small{width:36px;height:36px;border-radius:50%;overflow:hidden}
      .sv-footer a{color:var(--accent-end);text-decoration:none;font-weight:600;margin-left:12px}
      .sv-copy{color:var(--text-muted)}

      @media (max-width:800px){
        #sv-nav-list{display:none;flex-direction:column;background:var(--bg-card);position:absolute;right:12px;top:64px;padding:12px;border-radius:12px;border:1px solid var(--border-light)}
        .sv-menu-btn{display:block}
        .sv-footer{flex-direction:column;align-items:flex-start;gap:8px}
      }
    </style>

    <!-- Script that will be injected and executed in the host page -->
    <script id="solvoro-layout-script">
      function initSolvoroLayout(){
        try{
          const user = JSON.parse(localStorage.getItem('solvoroUser')) || JSON.parse(localStorage.getItem('user')) || null;

          // Elements (the header/footer have been imported into the page DOM already)
          const loginLink = document.querySelector('#sv-login-link');
          const logoImg = document.querySelector('#sv-logo-img');
          const menuBtn = document.querySelector('#sv-menu-btn');
          const navList = document.querySelector('#sv-nav-list');

          // Mobile menu toggle
          if(menuBtn && navList){
            menuBtn.addEventListener('click', () => {
              const open = navList.style.display === 'flex';
              navList.style.display = open ? 'none' : 'flex';
              menuBtn.setAttribute('aria-expanded', (!open).toString());
            });
          }

          // Set logo
          if(logoImg){
            if(user && user.profileImage){
              logoImg.src = user.profileImage;
            } else {
              // default favicon (keeps relative path)
              logoImg.src = 'favicon.png';
            }
          }

          // Setup login/dashboard link and optional logout button
          if(loginLink){
            if(user && user.email){
              loginLink.textContent = user.fullName || user.name || 'Dashboard';
              loginLink.href = 'dashboard.html';

              // Add logout button next to link (if not already present)
              if(!document.querySelector('#sv-logout-btn')){
                const li = document.createElement('li');
                const btn = document.createElement('button');
                btn.id = 'sv-logout-btn';
                btn.textContent = 'Logout';
                btn.style.cursor = 'pointer';
                btn.style.padding = '8px 10px';
                btn.style.borderRadius = '8px';
                btn.style.border = 'none';
                btn.style.fontWeight = '700';
                btn.style.background = 'linear-gradient(90deg,var(--accent-start),var(--accent-end))';
                btn.style.color = '#fff';
                btn.addEventListener('click', () => {
                  localStorage.removeItem('solvoroUser');
                  localStorage.removeItem('user');
                  alert('Logged out');
                  window.location.href = 'index.html';
                });
                li.appendChild(btn);
                const parentUl = document.querySelector('#sv-nav-list');
                if(parentUl) parentUl.appendChild(li);
              }
            } else {
              loginLink.textContent = 'Login';
              loginLink.href = 'login.html';
            }
          }

          // Accessibility: close menu when clicking outside on mobile
          document.addEventListener('click', (e) =>{
            const menuOpen = navList && navList.style.display === 'flex';
            if(menuOpen && !e.target.closest('.main-nav') && !e.target.closest('#sv-menu-btn')){
              navList.style.display = 'none';
              if(menuBtn) menuBtn.setAttribute('aria-expanded', 'false');
            }
          });

        } catch(err){
          console.error('initSolvoroLayout error', err);
        }
      }

      // If this file is opened standalone for preview, run init immediately
      try{ if(document.readyState === 'complete' || document.readyState === 'interactive'){ initSolvoroLayout(); } else { window.addEventListener('DOMContentLoaded', initSolvoroLayout); } } catch(e){}
    </script>

  </body>
</html>
